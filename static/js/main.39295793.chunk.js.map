{"version":3,"sources":["js/helpers/Globals.js","js/functions/PlayIcon.js","audio/sparkles-no-2.ogg","audio/sparkles-no-2.mid","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","PlayIcon","id","className","xmlns","height","viewBox","width","d","fill","P5SketchWithAudio","sketchRef","useRef","Sketch","p","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","scheduleCueSet","document","getElementById","classList","add","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","lastTicks","currentCue","i","length","note","ticks","time","addCue","packedCirclesSet","setup","createCanvas","blendMode","ADD","rectMode","CENTER","background","radius","random","circle","x","y","r","overlapping","existingCircle","dist","push","draw","isPlaying","packedCirclesSetIndex","executeCueSet1","duration","drawSparkle","parseInt","size","delayAmount","q","w","e","h","setTimeout","u","stroke","noFill","sizeAdjuster","line","Math","cos","sin","ellipse","mousePressed","pause","currentTime","buffer","reset","addClass","play","creditsLogged","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.39295793.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/sparkles-no-2.4a4fa165.ogg\";","export default __webpack_public_path__ + \"static/media/sparkles-no-2.da847a48.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\n\nimport audio from \"../audio/sparkles-no-2.ogg\";\nimport midi from \"../audio/sparkles-no-2.mid\";\n\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    const noteSet1 = result.tracks[5].notes; // Synth 1\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        } \n\n        p.packedCirclesSet = [];\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.blendMode(p.ADD);\n            p.rectMode(p.CENTER);\n            p.background(0);\n\n            while(p.packedCirclesSet.length < 25) {\n                let radius = p.random(p.height / 12, p.height / 6); \n                const circle = {\n                    x: p.random(0, p.width),\n                    y: p.random(0, p.height),\n                    r: radius\n                }\n                \n                let overlapping = false;\n                for (let i = 0; i < p.packedCirclesSet.length; i++) {\n                    const existingCircle = p.packedCirclesSet[i];\n                    const distance = p.dist(circle.x, circle.y, existingCircle.x, existingCircle.y);\n                    if (distance < circle.r + existingCircle.r) {\n                        overlapping = true;\n                        break;\n                    }\n                }\n                if(!overlapping) {\n                    p.packedCirclesSet.push(circle);\n                }\n            }\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n\n            }\n        }\n\n        p.packedCirclesSetIndex = 0;\n\n        p.executeCueSet1 = (note) => {\n            const { duration } = note,\n                circle = p.packedCirclesSet[p.packedCirclesSetIndex], \n                { x, y, r } = circle;\n                \n            p.drawSparkle(x, y, r, parseInt(duration * 1000));\n            p.packedCirclesSetIndex++;\n        }\n\n        p.drawSparkle = (x, y, size, duration) => {\n            const delayAmount = duration / 360;\n            let r = size * p.random(1.2,1.5);\n            let q=p.random(0,255);\n            let w=p.random(0,255);\n            let e=p.random(0,255);\n\n            for (let h = 0; h < 360; h++) {\n                setTimeout(\n                    function () {\n                        let u=p.random(1,5)\n                        p.stroke(q,w,e,p.random(193));\n                        p.noFill();\n                        const sizeAdjuster = p.random(0, r);\n                        p.line(x,y,x+sizeAdjuster*Math.cos(h),y+sizeAdjuster*Math.sin(h));\n                        p.line(x,y,x+r*Math.cos(h)/u,y+r*Math.sin(h)/u);\n                        p.fill(q,w,e,10);\n                        if(Math.random() < 0.2) {\n                            p.fill(q,w,e,64);\n                            p.ellipse(x+r*Math.cos(h),y+r*Math.sin(h),r/50,r/50);\n                        }\n                        p.fill(q,w,e,127);\n                        p.ellipse(x+r*Math.cos(h)/u,y+r*Math.sin(h)/u,r/50,r/50);\n                    },\n                    (delayAmount * h)\n                );\n            }\n        }\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}